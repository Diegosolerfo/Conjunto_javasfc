<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Editar Compra</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>
    </h:head>

    <h:body>
        <h2 class="text-center text-primary">Editar Compra</h2>
        <br/>

        <center>
            <h:form>

                <!-- Campo oculto ID compra -->
                <h:inputHidden value="#{compraBean.compra.id_compra}" />

                <h:panelGrid columns="3">

                    <!-- FECHA -->
                    <h:outputLabel value="Fecha:" for="fec" />
                    <h:inputText id="fec" value="#{compraBean.compra.fecha}" class="form-control"
                                 required="true" requiredMessage="Debe especificar una fecha" />
                    <h:message for="fec" class="text-danger" />

                    <!-- CANTIDAD -->
                    <h:outputLabel value="Cantidad:" for="cant" />
                    <h:inputText id="cant" value="#{compraBean.compra.cantidad}" class="form-control"
                                 required="true" requiredMessage="Debe especificar una cantidad" />
                    <h:message for="cant" class="text-danger" />

                    <!-- TOTAL -->
                    <h:outputLabel value="Total:" for="tot" />
                    <h:inputText id="tot" value="#{compraBean.compra.total}" class="form-control"
                                 required="true" requiredMessage="Debe especificar un total" />
                    <h:message for="tot" class="text-danger" />

                    <!-- USUARIO (FK) -->
                    <h:outputLabel value="Usuario:" for="usu" />
                    <h:selectOneMenu id="usu" value="#{compraBean.compra.id_usuario}" class="form-select">
                        <f:selectItems value="#{compraBean.listaUsuarios}" var="u"
                                       itemValue="#{u.cedula}" itemLabel="#{u.nombre} #{u.apellido}" />
                    </h:selectOneMenu>
                    <h:message for="usu" class="text-danger" />

                    <!-- PRODUCTO (FK) -->
                    <h:outputLabel value="Producto:" for="prod" />
                    <h:selectOneMenu id="prod" value="#{compraBean.compra.id_producto}" class="form-select">
                        <f:selectItems value="#{compraBean.listaProductos}" var="p"
                                       itemValue="#{p.id_producto}" itemLabel="#{p.nombre}" />
                    </h:selectOneMenu>
                    <h:message for="prod" class="text-danger" />

                    <!-- PROVEEDOR (FK) -->
                    <h:outputLabel value="Proveedor:" for="prov" />
                    <h:selectOneMenu id="prov" value="#{compraBean.compra.id_proveedor}" class="form-select">
                        <f:selectItems value="#{compraBean.listaProveedores}" var="pr"
                                       itemValue="#{pr.id_proveedor}" itemLabel="#{pr.nombre}" />
                    </h:selectOneMenu>
                    <h:message for="prov" class="text-danger" />

                    <!-- ESPACIO -->
                    <h:column /><h:column><br/></h:column><h:column />

                    <!-- BOTONES -->
                    <h:column />
                    <h:column>
                        <h:commandButton class="btn btn-success" value="Actualizar"
                                         actionListener="#{compraBean.actualizar()}" action="index" />

                        <h:commandButton class="btn btn-secondary" value="Cancelar"
                                         action="index" style="margin-left: 15px;" immediate="true" />
                    </h:column>

                </h:panelGrid>
            </h:form>
        </center>

    </h:body>
</html>
